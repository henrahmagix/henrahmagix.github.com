{% if include.posts.size > 0 %}
  <ul class="list-reset posts side-by-side">
    {% assign posts = include.posts|where_exp:"post", "post.hidden != true" %}
    {% if include.sample %}{% assign posts = posts|sample:include.sample %}{% endif %}
    {% for post in posts %}
      <li class="{%if include.minimal%}minimal{%endif%}">
        <article>
          {% include published-date.html context=post %}

          <a class="journal-underline" href="{{post.url}}">
            {% capture title_html %}
              <h2 class="post-title">{{post.title|markdownify|remove:'<p>'|remove:'</p>'}}</h2>
            {% endcapture %}

            {% if include.minimal %}
              {{title_html}}
            {% else %}
              {% if post.image %}
                <div class="post-image image-from-url" style="background-image: url({{post.image}});"></div>
              {% else %}
                <div class="post-image random-gradient random-gradient-{{forloop.index0|modulo:8}}"></div>
              {% endif %}
              {{title_html}}
            {% endif %}
          </a>

          <div class="excerpt">
            {% if post.subtitle %}{{post.subtitle|markdownify}}{% endif %}
            <p>
              {% assign excerpt = post.content|strip_html|truncatewords:20,"" %}
              {{ excerpt }}
              {% if excerpt != post.content %}&hellip; <a href="{{post.url}}"><em>read more</em></a>{% endif %}
            </p>
          </div>
        </article>
      </li>
    {% endfor %}
  </ul>
{% endif %}
